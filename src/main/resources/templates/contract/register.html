<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/basic.html}">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<div layout:fragment="content">

    <div class="row-mt-3">
        <div class="col">
            <form method="post" id="register" action="/contract/register">
            <div class="card" style="margin-bottom: 5%">
                <div class="card-header">
                    <h5>계약등록</h5>
                </div>
                <div class="card-body">
                    <div class="col">
                        <h2>계약정보</h2>
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text">계약일자</span>
                        <input type="date" id="cdate" name="cdate" class="form-control">
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text">양도양수조건</span>
                        <textarea style="width: 100%; height: 200px;" class="form-control" id="ccontent" name="ccontent"></textarea>
                    </div>
                </div>      <!-- * card-body끝 *-->
            </div>      <!-- * card 끝 *-->

            <div class="card" style="margin-bottom: 5%">
                <div class="card-body">
                    <div class="col">
                        <h2>품목 정보</h2>
                        <div class="input-group mb-3">
                            <span class="input-group-text">품목코드</span>
                            <input type="hidden" id="pno" name="pno">
                            <input type="hidden" id="tcode" name="tcode">
                            <input type="hidden" id="mcode" name="mcode">
                            <input type="text" id="pcode" name="pcode" class="form-control" readonly placeholder="클릭하세요!!!">
                        </div>
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text">품목이름</span>
                        <input type="text" id="pname" name="pname" class="form-control" readonly>
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text">품목분류1</span>
                        <input type="text" id="mname" name="mname" class="form-control" readonly>
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text">품목분류2</span>
                        <input type="text" id="tname" name="tname" class="form-control" readonly>
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text">공급단가</span>
                        <input type="text" id="cprice" name="cprice" class="form-control">
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-body">
                    <div class="col">
                        <h2>납품업체 정보</h2>
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text">사업자 등록번호</span>
                        <input type="text" id="ptno" name="ptno" readonly class="form-control">
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text">상호</span>
                        <input type="text" id="ptname" name="ptname" readonly class="form-control">
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text">대표자</span>
                        <input type="text" id="ptceoname" name="ptceoname" readonly class="form-control">
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text">주소</span>
                        <input type="text" id="ptadd" name="ptadd" readonly class="form-control">
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text">전화번호</span>
                        <input type="text" id="ptnum" name="ptnum" readonly class="form-control">
                    </div>
                    <div class="input-group mb-3">
                        <span class="input-group-text">팩스</span>
                        <input type="text" id="ptfax" name="ptfax" readonly class="form-control">
                    </div>
                    <div class="float-end">
                        <input class="btn btn-dark" type="button" value="목록" onclick="back()">
                        <input class="btn btn-primary" type="button" value="등록" onclick="register()">
                    </div>
                </div>       <!-- * card-body끝 *-->
            </div>
            </form>
        </div>      <!-- * col 끝 * -->
    </div>

</div>
<script layout:fragment="script" th:inline="javascript">
    function register(){
        var objform = $("#register");
        var cdate = $("#cdate").val();
        var cprice = $("#cprice").val();
        var ccontent = $("#ccontent").val();
        var ptno = $("#ptno").val();
        var pno = $("#pno").val();

        if(pno == ""){
            alert("품목을 선택해주세요");
        }else if(ptno == ""){
            alert("업체를 선택해주세요");
        }else if(cdate == ""){
            alert("계약일을 작성해주세요")
        }else if(cprice == ""){
            alert("공급단가를 입력해주세요");
        }else if(ccontent == ""){
            alert("계약내용을 입력해주세요");
        }else{
            objform.submit();
        }
    }

    function back(){
        location.href = '/contract/list';
    }
$("#ptno").click(function(){
    window.open("/contract/partner","partner","width=1000, height=700");
})
$("#pcode").click(function(){
    window.open("/contract/product","partner","width=1000, height=700");
})
</script>
<body>

</body>
</html>